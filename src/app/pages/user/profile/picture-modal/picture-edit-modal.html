<dialog class="picture-dialog" #picture>
	<!-- <icon-close class="close" (click)="closePictureModal()" /> -->

	<app-title [text]="isOwner ? ('profile.update_picture' | translate) : ('profile.update_picture_of_user' | translate: { username })" [adaptColor]="true" />
	<form method="dialog">
		<span *ngIf="timeLeft" class="warning">{{ 'profile.picture_too_recent' | translate: { date: timeLeft | date: 'dd/MM/yyyy HH:mm:ss' } }}</span>

		<app-file-input *ngIf="!timeLeft" (change)="updateUncroppedPicture($event)" />

		<app-image-cropper
			class="cropper"
			*ngIf="pictureUncropped"
			[imageUrl]="pictureUncropped"
			[cropperOptions]="options"
			(export)="updateCroppedPicture($event)"
		/>

		<app-button
			type="submit"
			*ngIf="!timeLeft"
			[text]="'global.save' | translate"
			[disabled]="!pictureUncropped"
			(click)="cropper.exportCanvas()"
		/>

		<app-button *ngIf="existingPicture && hasPermissions" [text]="'global.delete' | translate" aspect="danger"
			(click)="deleteCurrentPicture()" />
	</form>
</dialog>
